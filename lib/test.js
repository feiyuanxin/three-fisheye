'use strict';
var _PowerAssertRecorder1 = function () {
    function PowerAssertRecorder() {
        this.captured = [];
    }
    PowerAssertRecorder.prototype._capt = function _capt(value, espath) {
        this.captured.push({
            value: value,
            espath: espath
        });
        return value;
    };
    PowerAssertRecorder.prototype._expr = function _expr(value, source) {
        var capturedValues = this.captured;
        this.captured = [];
        return {
            powerAssertContext: {
                value: value,
                events: capturedValues
            },
            source: source
        };
    };
    return PowerAssertRecorder;
}();
var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) {
            try {
                step(generator.next(value));
            } catch (e) {
                reject(e);
            }
        }
        function rejected(value) {
            try {
                step(generator['throw'](value));
            } catch (e) {
                reject(e);
            }
        }
        function step(result) {
            result.done ? resolve(result.value) : new P(function (resolve) {
                resolve(result.value);
            }).then(fulfilled, rejected);
        }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = this && this.__generator || function (thisArg, body) {
    var _ = {
            label: 0,
            sent: function () {
                if (t[0] & 1)
                    throw t[1];
                return t[1];
            },
            trys: [],
            ops: []
        }, f, y, t, g;
    return g = {
        next: verb(0),
        'throw': verb(1),
        'return': verb(2)
    }, typeof Symbol === 'function' && (g[Symbol.iterator] = function () {
        return this;
    }), g;
    function verb(n) {
        return function (v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f)
            throw new TypeError('Generator is already executing.');
        while (_)
            try {
                if (f = 1, y && (t = y[op[0] & 2 ? 'return' : op[0] ? 'throw' : 'next']) && !(t = t.call(y, op[1])).done)
                    return t;
                if (y = 0, t)
                    op = [
                        0,
                        t.value
                    ];
                switch (op[0]) {
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [0];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2])
                        _.ops.pop();
                    _.trys.pop();
                    continue;
                }
                op = body.call(thisArg, _);
            } catch (e) {
                op = [
                    6,
                    e
                ];
                y = 0;
            } finally {
                f = t = 0;
            }
        if (op[0] & 5)
            throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
};
var _this = this;
Object.defineProperty(exports, '__esModule', { value: true });
var _1 = require('./');
var dat = require('dat-gui');
var QUnit = require('qunitjs');
var empower = require('empower');
var formatter = require('power-assert-formatter');
var qunitTap = require('qunit-tap');
QUnit.config.autostart = true;
empower(QUnit.assert, formatter(), { destructive: true });
qunitTap(QUnit, function () {
    console.log.apply(console, arguments);
}, { showSourceOnFailure: false });
QUnit.module('Fisheye');
QUnit.test('mercator2Sphere, sphere2Mercator', function (assert) {
    return __awaiter(_this, void 0, void 0, function () {
        var x, y, _a, a, b, _b, _x, _y;
        return __generator(this, function (_c) {
            var _rec1 = new _PowerAssertRecorder1();
            var _rec2 = new _PowerAssertRecorder1();
            for (x = 0; x <= 1; x += 0.01) {
                for (y = 0; y <= 1; y += 0.01) {
                    _a = _1.mercator2Sphere(x, y), a = _a[0], b = _a[1];
                    _b = _1.sphere2Mercator(a, b), _x = _b[0], _y = _b[1];
                    assert.ok(_rec1._expr(_rec1._capt(_rec1._capt(_rec1._capt(_rec1._capt(x, 'arguments/0/left/left/left') - 1e-8, 'arguments/0/left/left') <= _rec1._capt(_x, 'arguments/0/left/right'), 'arguments/0/left') && _rec1._capt(_rec1._capt(_x, 'arguments/0/right/left') <= _rec1._capt(_rec1._capt(x, 'arguments/0/right/right/left') + 1e-8, 'arguments/0/right/right'), 'arguments/0/right'), 'arguments/0'), {
                        content: 'assert.ok(x - 0.00000001 <= _x && _x <= x + 0.00000001)',
                        filepath: 'lib/test.js',
                        line: 56
                    }));
                    assert.ok(_rec2._expr(_rec2._capt(_rec2._capt(_rec2._capt(_rec2._capt(y, 'arguments/0/left/left/left') - 1e-8, 'arguments/0/left/left') <= _rec2._capt(_y, 'arguments/0/left/right'), 'arguments/0/left') && _rec2._capt(_rec2._capt(_y, 'arguments/0/right/left') <= _rec2._capt(_rec2._capt(y, 'arguments/0/right/right/left') + 1e-8, 'arguments/0/right/right'), 'arguments/0/right'), 'arguments/0'), {
                        content: 'assert.ok(y - 0.00000001 <= _y && _y <= y + 0.00000001)',
                        filepath: 'lib/test.js',
                        line: 57
                    }));
                }
            }
            return [2];
        });
    });
});
QUnit.test('Fisheye2Perspective', function (assert) {
    return __awaiter(_this, void 0, void 0, function () {
        var stream, url, video, cam, dragging, gui, width, tid;
        return __generator(this, function (_a) {
            switch (_a.label) {
            case 0:
                return [
                    4,
                    navigator.mediaDevices.getUserMedia({
                        audio: true,
                        video: {
                            mandatory: {
                                minFrameRate: 1,
                                maxFrameRate: 5,
                                minWidth: 2592,
                                minHeight: 1944
                            }
                        }
                    })
                ];
            case 1:
                stream = _a.sent();
                url = URL.createObjectURL(stream);
                video = document.createElement('video');
                video.src = url;
                return [
                    4,
                    new Promise(function (resolve, reject) {
                        video.addEventListener('loadeddata', resolve, { once: true });
                        video.addEventListener('error', reject, { once: true });
                    })
                ];
            case 2:
                _a.sent();
                video.autoplay = true;
                cam = new _1.Fisheye2Perspective();
                cam.src = video;
                cam.canvasSize = {
                    width: 600,
                    height: 400
                };
                cam.cameraPose = {
                    pitch: Math.PI / 4,
                    yaw: 0
                };
                cam.zoom = 1 / 3;
                cam.fisheyeRegion = {
                    centerX: 1259,
                    centerY: 887,
                    radius: 879
                };
                dragging = false;
                cam.canvas.addEventListener('mousemove', function (ev) {
                    if (dragging) {
                        cam.drag('move', ev.offsetX, ev.offsetY);
                    }
                });
                cam.canvas.addEventListener('mousedown', function (ev) {
                    dragging = true;
                    cam.drag('start', ev.offsetX, ev.offsetY);
                });
                cam.canvas.addEventListener('mouseup', function (ev) {
                    dragging = false;
                });
                cam.canvas.addEventListener('mouseleave', function (ev) {
                    dragging = false;
                });
                gui = new dat.GUI();
                width = cam.texctx.canvas.width;
                gui.add(video, 'currentTime', 0, video.duration);
                gui.add(cam, 'zoom', 0.01, 2).step(0.01);
                gui.add(cam, 'centerX', -width, width);
                gui.add(cam, 'centerY', -width, width);
                gui.add(cam, 'radius', 1, width / 2);
                gui.add(cam, 'pitch', 0, Math.PI / 2);
                gui.add(cam, 'yaw', -Math.PI, Math.PI);
                gui.close();
                document.body.appendChild(cam.canvas);
                tid = setInterval(function () {
                    cam.render();
                    gui.__controllers.forEach(function (ctrl) {
                        ctrl.updateDisplay();
                    });
                }, 30);
                video.play();
                return [
                    4,
                    sleep(5 * 60 * 1000)
                ];
            case 3:
                _a.sent();
                clearTimeout(tid);
                cam.destructor();
                video.pause();
                URL.revokeObjectURL(url);
                stream.getTracks().forEach(function (a) {
                    a.stop();
                });
                assert.ok(true);
                return [2];
            }
        });
    });
});
QUnit.test('Fisheye2Equirectangular', function (assert) {
    return __awaiter(_this, void 0, void 0, function () {
        var video, cam;
        return __generator(this, function (_a) {
            switch (_a.label) {
            case 0:
                video = document.createElement('video');
                video.src = './ec2e5847-b502-484c-b898-b8e2955f4545.webm';
                return [
                    4,
                    new Promise(function (resolve, reject) {
                        video.addEventListener('loadeddata', resolve, { once: true });
                        video.addEventListener('error', reject, { once: true });
                    })
                ];
            case 1:
                _a.sent();
                cam = new _1.Fisheye2Equirectangular();
                window['cam'] = cam;
                cam.src = video;
                cam.fisheyeRegion = {
                    centerX: 1259,
                    centerY: 887,
                    radius: 879
                };
                document.body.appendChild(cam.canvas);
                cam.render();
                assert.ok(true);
                return [2];
            }
        });
    });
});
function sleep(ms) {
    return new Promise(function (resolve) {
        return setTimeout(resolve, ms);
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi90ZXN0LmpzIl0sIm5hbWVzIjpbIl9Qb3dlckFzc2VydFJlY29yZGVyMSIsIlBvd2VyQXNzZXJ0UmVjb3JkZXIiLCJjYXB0dXJlZCIsInByb3RvdHlwZSIsIl9jYXB0IiwidmFsdWUiLCJlc3BhdGgiLCJwdXNoIiwiX2V4cHIiLCJzb3VyY2UiLCJjYXB0dXJlZFZhbHVlcyIsInBvd2VyQXNzZXJ0Q29udGV4dCIsImV2ZW50cyIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiX19nZW5lcmF0b3IiLCJib2R5IiwiXyIsImxhYmVsIiwic2VudCIsInQiLCJ0cnlzIiwib3BzIiwiZiIsInkiLCJnIiwidmVyYiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibiIsInYiLCJvcCIsIlR5cGVFcnJvciIsImNhbGwiLCJwb3AiLCJsZW5ndGgiLCJfdGhpcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsIl8xIiwicmVxdWlyZSIsImRhdCIsIlFVbml0IiwiZW1wb3dlciIsImZvcm1hdHRlciIsInF1bml0VGFwIiwiY29uZmlnIiwiYXV0b3N0YXJ0IiwiYXNzZXJ0IiwiZGVzdHJ1Y3RpdmUiLCJjb25zb2xlIiwibG9nIiwiYXJndW1lbnRzIiwic2hvd1NvdXJjZU9uRmFpbHVyZSIsIm1vZHVsZSIsInRlc3QiLCJ4IiwiX2EiLCJhIiwiYiIsIl9iIiwiX3giLCJfeSIsIl9jIiwiX3JlYzEiLCJfcmVjMiIsIm1lcmNhdG9yMlNwaGVyZSIsInNwaGVyZTJNZXJjYXRvciIsIm9rIiwiY29udGVudCIsImZpbGVwYXRoIiwibGluZSIsInN0cmVhbSIsInVybCIsInZpZGVvIiwiY2FtIiwiZHJhZ2dpbmciLCJndWkiLCJ3aWR0aCIsInRpZCIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImdldFVzZXJNZWRpYSIsImF1ZGlvIiwibWFuZGF0b3J5IiwibWluRnJhbWVSYXRlIiwibWF4RnJhbWVSYXRlIiwibWluV2lkdGgiLCJtaW5IZWlnaHQiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJhZGRFdmVudExpc3RlbmVyIiwib25jZSIsImF1dG9wbGF5IiwiRmlzaGV5ZTJQZXJzcGVjdGl2ZSIsImNhbnZhc1NpemUiLCJoZWlnaHQiLCJjYW1lcmFQb3NlIiwicGl0Y2giLCJNYXRoIiwiUEkiLCJ5YXciLCJ6b29tIiwiZmlzaGV5ZVJlZ2lvbiIsImNlbnRlclgiLCJjZW50ZXJZIiwicmFkaXVzIiwiY2FudmFzIiwiZXYiLCJkcmFnIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJHVUkiLCJ0ZXhjdHgiLCJhZGQiLCJkdXJhdGlvbiIsImNsb3NlIiwiYXBwZW5kQ2hpbGQiLCJzZXRJbnRlcnZhbCIsInJlbmRlciIsIl9fY29udHJvbGxlcnMiLCJmb3JFYWNoIiwiY3RybCIsInVwZGF0ZURpc3BsYXkiLCJwbGF5Iiwic2xlZXAiLCJjbGVhclRpbWVvdXQiLCJkZXN0cnVjdG9yIiwicGF1c2UiLCJyZXZva2VPYmplY3RVUkwiLCJnZXRUcmFja3MiLCJzdG9wIiwiRmlzaGV5ZTJFcXVpcmVjdGFuZ3VsYXIiLCJ3aW5kb3ciLCJtcyIsInNldFRpbWVvdXQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsSUFBQUEscUJBQUE7QUFBQSxhQUFBQyxtQkFBQTtBQUFBLGFBQUFDLFFBQUE7QUFBQTtBQUFBLElBQUFELG1CQUFBLENBQUFFLFNBQUEsQ0FBQUMsS0FBQSxZQUFBQSxLQUFBLENBQUFDLEtBQUEsRUFBQUMsTUFBQTtBQUFBLGFBQUFKLFFBQUEsQ0FBQUssSUFBQTtBQUFBLFlBQUFGLEtBQUEsRUFBQUEsS0FBQTtBQUFBLFlBQUFDLE1BQUEsRUFBQUEsTUFBQTtBQUFBO0FBQUEsZUFBQUQs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QVVDLE9BQVYsRUFBbUI7QUFBQSxRQUFFLE9BQU91SSxVQUFBLENBQVd2SSxPQUFYLEVBQW9Cc0ksRUFBcEIsQ0FBUCxDQUFGO0FBQUEsS0FBL0IsQ0FBUCxDQURlO0FBQUEiLCJzb3VyY2VSb290IjoiL1VzZXJzL3UwMTc0OS9HaXRodWIvdGhyZWVqcy1maXNoZXllIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSB5W29wWzBdICYgMiA/IFwicmV0dXJuXCIgOiBvcFswXSA/IFwidGhyb3dcIiA6IFwibmV4dFwiXSkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gWzAsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbnZhciBfdGhpcyA9IHRoaXM7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgXzEgPSByZXF1aXJlKFwiLi9cIik7XG52YXIgZGF0ID0gcmVxdWlyZShcImRhdC1ndWlcIik7XG52YXIgUVVuaXQgPSByZXF1aXJlKCdxdW5pdGpzJyk7XG52YXIgZW1wb3dlciA9IHJlcXVpcmUoJ2VtcG93ZXInKTtcbnZhciBmb3JtYXR0ZXIgPSByZXF1aXJlKCdwb3dlci1hc3NlcnQtZm9ybWF0dGVyJyk7XG52YXIgcXVuaXRUYXAgPSByZXF1aXJlKFwicXVuaXQtdGFwXCIpO1xuUVVuaXQuY29uZmlnLmF1dG9zdGFydCA9IHRydWU7XG5lbXBvd2VyKFFVbml0LmFzc2VydCwgZm9ybWF0dGVyKCksIHsgZGVzdHJ1Y3RpdmU6IHRydWUgfSk7XG5xdW5pdFRhcChRVW5pdCwgZnVuY3Rpb24gKCkgeyBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpOyB9LCB7IHNob3dTb3VyY2VPbkZhaWx1cmU6IGZhbHNlIH0pO1xuUVVuaXQubW9kdWxlKFwiRmlzaGV5ZVwiKTtcblFVbml0LnRlc3QoXCJtZXJjYXRvcjJTcGhlcmUsIHNwaGVyZTJNZXJjYXRvclwiLCBmdW5jdGlvbiAoYXNzZXJ0KSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHgsIHksIF9hLCBhLCBiLCBfYiwgX3gsIF95O1xuICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgZm9yICh4ID0gMDsgeCA8PSAxOyB4ICs9IDAuMDEpIHtcbiAgICAgICAgICAgIGZvciAoeSA9IDA7IHkgPD0gMTsgeSArPSAwLjAxKSB7XG4gICAgICAgICAgICAgICAgX2EgPSBfMS5tZXJjYXRvcjJTcGhlcmUoeCwgeSksIGEgPSBfYVswXSwgYiA9IF9hWzFdO1xuICAgICAgICAgICAgICAgIF9iID0gXzEuc3BoZXJlMk1lcmNhdG9yKGEsIGIpLCBfeCA9IF9iWzBdLCBfeSA9IF9iWzFdO1xuICAgICAgICAgICAgICAgIGFzc2VydC5vayh4IC0gMC4wMDAwMDAwMSA8PSBfeCAmJiBfeCA8PSB4ICsgMC4wMDAwMDAwMSk7XG4gICAgICAgICAgICAgICAgYXNzZXJ0Lm9rKHkgLSAwLjAwMDAwMDAxIDw9IF95ICYmIF95IDw9IHkgKyAwLjAwMDAwMDAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgfSk7XG59KTsgfSk7XG5RVW5pdC50ZXN0KFwiRmlzaGV5ZTJQZXJzcGVjdGl2ZVwiLCBmdW5jdGlvbiAoYXNzZXJ0KSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN0cmVhbSwgdXJsLCB2aWRlbywgY2FtLCBkcmFnZ2luZywgZ3VpLCB3aWR0aCwgdGlkO1xuICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2aWRlbzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRnJhbWVSYXRlOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEZyYW1lUmF0ZTogNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5XaWR0aDogMjU5MixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IDE5NDRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBzdHJlYW0gPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pO1xuICAgICAgICAgICAgICAgIHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO1xuICAgICAgICAgICAgICAgIHZpZGVvLnNyYyA9IHVybDtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkZGF0YVwiLCByZXNvbHZlLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgcmVqZWN0LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgdmlkZW8uYXV0b3BsYXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNhbSA9IG5ldyBfMS5GaXNoZXllMlBlcnNwZWN0aXZlKCk7XG4gICAgICAgICAgICAgICAgY2FtLnNyYyA9IHZpZGVvO1xuICAgICAgICAgICAgICAgIGNhbS5jYW52YXNTaXplID0geyB3aWR0aDogNjAwLCBoZWlnaHQ6IDQwMCB9O1xuICAgICAgICAgICAgICAgIGNhbS5jYW1lcmFQb3NlID0geyBwaXRjaDogTWF0aC5QSSAvIDQsIHlhdzogMCB9O1xuICAgICAgICAgICAgICAgIGNhbS56b29tID0gMSAvIDM7XG4gICAgICAgICAgICAgICAgY2FtLmZpc2hleWVSZWdpb24gPSB7IGNlbnRlclg6IDEyNTksIGNlbnRlclk6IDg4NywgcmFkaXVzOiA4NzkgfTtcbiAgICAgICAgICAgICAgICBkcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNhbS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbiAoZXYpIHsgaWYgKGRyYWdnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbS5kcmFnKFwibW92ZVwiLCBldi5vZmZzZXRYLCBldi5vZmZzZXRZKTtcbiAgICAgICAgICAgICAgICB9IH0pO1xuICAgICAgICAgICAgICAgIGNhbS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbiAoZXYpIHsgZHJhZ2dpbmcgPSB0cnVlOyBjYW0uZHJhZyhcInN0YXJ0XCIsIGV2Lm9mZnNldFgsIGV2Lm9mZnNldFkpOyB9KTtcbiAgICAgICAgICAgICAgICBjYW0uY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uIChldikgeyBkcmFnZ2luZyA9IGZhbHNlOyB9KTtcbiAgICAgICAgICAgICAgICBjYW0uY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uIChldikgeyBkcmFnZ2luZyA9IGZhbHNlOyB9KTtcbiAgICAgICAgICAgICAgICBndWkgPSBuZXcgZGF0LkdVSSgpO1xuICAgICAgICAgICAgICAgIHdpZHRoID0gY2FtLnRleGN0eC5jYW52YXMud2lkdGg7XG4gICAgICAgICAgICAgICAgZ3VpLmFkZCh2aWRlbywgXCJjdXJyZW50VGltZVwiLCAwLCB2aWRlby5kdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgZ3VpLmFkZChjYW0sIFwiem9vbVwiLCAwLjAxLCAyKS5zdGVwKDAuMDEpO1xuICAgICAgICAgICAgICAgIGd1aS5hZGQoY2FtLCBcImNlbnRlclhcIiwgLXdpZHRoLCB3aWR0aCk7XG4gICAgICAgICAgICAgICAgZ3VpLmFkZChjYW0sIFwiY2VudGVyWVwiLCAtd2lkdGgsIHdpZHRoKTtcbiAgICAgICAgICAgICAgICBndWkuYWRkKGNhbSwgXCJyYWRpdXNcIiwgMSwgd2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICBndWkuYWRkKGNhbSwgXCJwaXRjaFwiLCAwLCBNYXRoLlBJIC8gMik7XG4gICAgICAgICAgICAgICAgZ3VpLmFkZChjYW0sIFwieWF3XCIsIC1NYXRoLlBJLCBNYXRoLlBJKTtcbiAgICAgICAgICAgICAgICBndWkuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbS5jYW52YXMpO1xuICAgICAgICAgICAgICAgIHRpZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FtLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICBndWkuX19jb250cm9sbGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKGN0cmwpIHsgY3RybC51cGRhdGVEaXNwbGF5KCk7IH0pOyAvLyBkYXQtZ3VpXG4gICAgICAgICAgICAgICAgfSwgMzApO1xuICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzbGVlcCg1ICogNjAgKiAxMDAwKV07XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aWQpO1xuICAgICAgICAgICAgICAgIGNhbS5kZXN0cnVjdG9yKCk7XG4gICAgICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTtcbiAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgICAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKGEpIHsgYS5zdG9wKCk7IH0pO1xuICAgICAgICAgICAgICAgIGFzc2VydC5vayh0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgIH1cbiAgICB9KTtcbn0pOyB9KTtcblFVbml0LnRlc3QoXCJGaXNoZXllMkVxdWlyZWN0YW5ndWxhclwiLCBmdW5jdGlvbiAoYXNzZXJ0KSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZpZGVvLCBjYW07XG4gICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIik7XG4gICAgICAgICAgICAgICAgdmlkZW8uc3JjID0gXCIuL2VjMmU1ODQ3LWI1MDItNDg0Yy1iODk4LWI4ZTI5NTVmNDU0NS53ZWJtXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlZGRhdGFcIiwgcmVzb2x2ZSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIHJlamVjdCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgIGNhbSA9IG5ldyBfMS5GaXNoZXllMkVxdWlyZWN0YW5ndWxhcigpO1xuICAgICAgICAgICAgICAgIHdpbmRvd1tcImNhbVwiXSA9IGNhbTtcbiAgICAgICAgICAgICAgICBjYW0uc3JjID0gdmlkZW87XG4gICAgICAgICAgICAgICAgLy9jYW0uY2FudmFzU2l6ZSA9IHt3aWR0aDogNjAwLCBoZWlnaHQ6IDQwMH07XG4gICAgICAgICAgICAgICAgY2FtLmZpc2hleWVSZWdpb24gPSB7IGNlbnRlclg6IDEyNTksIGNlbnRlclk6IDg4NywgcmFkaXVzOiA4NzkgfTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbS5jYW52YXMpO1xuICAgICAgICAgICAgICAgIGNhbS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQub2sodHJ1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICB9XG4gICAgfSk7XG59KTsgfSk7XG5mdW5jdGlvbiBzbGVlcChtcykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlLCBtcyk7IH0pO1xufVxuIl19

